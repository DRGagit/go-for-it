<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Theoretisch ja, praktisch auch! Tests in R | DRG/AGIT - Go for IT</title>
  <meta name="description" content="Dies ist das Begleitbuch für die Webinarreihe ‘Go for IT’." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Theoretisch ja, praktisch auch! Tests in R | DRG/AGIT - Go for IT" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="./assets/img/banner.png" />
  <meta property="og:description" content="Dies ist das Begleitbuch für die Webinarreihe ‘Go for IT’." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Theoretisch ja, praktisch auch! Tests in R | DRG/AGIT - Go for IT" />
  
  <meta name="twitter:description" content="Dies ist das Begleitbuch für die Webinarreihe ‘Go for IT’." />
  <meta name="twitter:image" content="./assets/img/banner.png" />

<meta name="author" content="Bettina Baeßler &amp; Daniel Pinto dos Santos" />


<meta name="date" content="2020-03-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="deskriptive-statistik-in-r.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119151357-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-119151357-2');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DRG/AGIT - Go for IT</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Einleitung</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#termine-der-live-webinare-20192020"><i class="fa fa-check"></i>Termine der Live-Webinare 2019/2020</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#zum-nachschauen"><i class="fa fa-check"></i>Zum Nachschauen</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html"><i class="fa fa-check"></i><b>1</b> Einstieg in R: erste Schritte</a>
<ul>
<li class="chapter" data-level="1.1" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#lernziele"><i class="fa fa-check"></i><b>1.1</b> Lernziele</a></li>
<li class="chapter" data-level="1.2" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#installation-von-r-und-rstudio"><i class="fa fa-check"></i><b>1.2</b> Installation von R und RStudio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#installation-r"><i class="fa fa-check"></i><b>1.2.1</b> Installation R</a></li>
<li class="chapter" data-level="1.2.2" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#installation-rstudio"><i class="fa fa-check"></i><b>1.2.2</b> Installation RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#die-rstudio-oberfläche"><i class="fa fa-check"></i><b>1.3</b> Die RStudio Oberfläche</a></li>
<li class="chapter" data-level="1.4" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#arithmetische-operatoren"><i class="fa fa-check"></i><b>1.4</b> Arithmetische Operatoren</a></li>
<li class="chapter" data-level="1.5" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#logische-operatoren"><i class="fa fa-check"></i><b>1.5</b> Logische Operatoren</a></li>
<li class="chapter" data-level="1.6" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#besondere-operatoren"><i class="fa fa-check"></i><b>1.6</b> Besondere Operatoren</a></li>
<li class="chapter" data-level="1.7" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#variablen"><i class="fa fa-check"></i><b>1.7</b> Variablen</a></li>
<li class="chapter" data-level="1.8" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#funktionen"><i class="fa fa-check"></i><b>1.8</b> Funktionen</a></li>
<li class="chapter" data-level="1.9" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#vektoren"><i class="fa fa-check"></i><b>1.9</b> Vektoren</a></li>
<li class="chapter" data-level="1.10" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#dataframes"><i class="fa fa-check"></i><b>1.10</b> Dataframes</a></li>
<li class="chapter" data-level="1.11" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#daten-einlesen"><i class="fa fa-check"></i><b>1.11</b> Daten einlesen</a></li>
<li class="chapter" data-level="1.12" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#ausblick"><i class="fa fa-check"></i><b>1.12</b> Ausblick</a></li>
<li class="chapter" data-level="1.13" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#schlussbemerkungen"><i class="fa fa-check"></i><b>1.13</b> Schlussbemerkungen</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><i class="fa fa-check"></i><b>2</b> Nächste Schritte in R: bunte Bilder und mehr</a>
<ul>
<li class="chapter" data-level="2.1" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#lernziele-1"><i class="fa fa-check"></i><b>2.1</b> Lernziele</a></li>
<li class="chapter" data-level="2.2" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#grafiken-in-base-r"><i class="fa fa-check"></i><b>2.2</b> Grafiken in Base R</a></li>
<li class="chapter" data-level="2.3" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#pakete-installieren-und-laden"><i class="fa fa-check"></i><b>2.3</b> Pakete installieren und laden</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#ein-kurzer-ausflug-ins-tidyverse"><i class="fa fa-check"></i><b>2.3.1</b> Ein kurzer Ausflug ins Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#grafiken-mit-ggplot2"><i class="fa fa-check"></i><b>2.4</b> Grafiken mit ggplot2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html"><i class="fa fa-check"></i><b>3</b> Deskriptive Statistik in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#lernziele-2"><i class="fa fa-check"></i><b>3.1</b> Lernziele</a></li>
<li class="chapter" data-level="3.2" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#deskriptive-statistiken-mit-basis-r"><i class="fa fa-check"></i><b>3.2</b> Deskriptive Statistiken mit Basis R</a></li>
<li class="chapter" data-level="3.3" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#deskriptive-statistiken-im-tidyverse"><i class="fa fa-check"></i><b>3.3</b> Deskriptive Statistiken im Tidyverse</a></li>
<li class="chapter" data-level="3.4" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#deskriptive-statistiken-mit-anderen-paketen"><i class="fa fa-check"></i><b>3.4</b> Deskriptive Statistiken mit anderen Paketen</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#psych"><i class="fa fa-check"></i><b>3.4.1</b> Psych</a></li>
<li class="chapter" data-level="3.4.2" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#summarytools"><i class="fa fa-check"></i><b>3.4.2</b> Summarytools</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#mehr-bunte-bilder"><i class="fa fa-check"></i><b>3.5</b> Mehr bunte Bilder</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html"><i class="fa fa-check"></i><b>4</b> Theoretisch ja, praktisch auch! Tests in R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#lernziele-3"><i class="fa fa-check"></i><b>4.1</b> Lernziele</a></li>
<li class="chapter" data-level="4.2" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#normalverteilung-prüfen"><i class="fa fa-check"></i><b>4.2</b> Normalverteilung prüfen</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#ein-kurzer-ausflug-in-ergebnisobjekte"><i class="fa fa-check"></i><b>4.2.1</b> Ein kurzer Ausflug in Ergebnisobjekte</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#t-test-und-wilcoxon-test"><i class="fa fa-check"></i><b>4.3</b> T-Test und Wilcoxon-Test</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#ein-kurzer-ausflug-in-formeln"><i class="fa fa-check"></i><b>4.3.1</b> Ein kurzer Ausflug in Formeln</a></li>
<li class="chapter" data-level="4.3.2" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#ein-kurzer-ausflug-in-funktionen"><i class="fa fa-check"></i><b>4.3.2</b> Ein kurzer Ausflug in Funktionen</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DRG/AGIT - Go for IT</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="theoretisch-ja-praktisch-auch-tests-in-r" class="section level1">
<h1><span class="header-section-number">4</span> Theoretisch ja, praktisch auch! Tests in R</h1>
<p>Üblicherweise geht es nach den deskriptiven Statistiken in den meisten Fällen ans Eingemachte - die <a href="https://de.wikipedia.org/wiki/Statistischer_Test">statistischen Tests</a>. Nehmen wir an, in zwei Gruppen beobachten wir unterschiedliche Mittelwerte. Eine mögliche Erklärung könnte sein, dass der bloße Zufall hier Unterschiede erscheinen lässt, wo in Wirklichkeit keine sind. Eine andere Möglichkeit wäre dann, dass in der Tat Unterschiede zwischen den Gruppen bestehen, und diese nicht alleine dem Zufall zu schulden sind.</p>
<p>Die gesamten theoretischen Grundlagen hier zu wiederholen würde sicher den Rahmen sprengen, insofern beschränken wir uns im Folgenden mit der Durchführung verschiedener statistischer Tests in R. Welcher Test wann der geeignete ist, ist manchmal nicht leicht zu erkennen. Für eine erste grobe Einschätzung kann aber die folgende Tabelle hilfreich sein.</p>
<div class="figure">
<img src="assets/img/stat_tests.png" alt="" />
<p class="caption">Mögliche statistische Tests in Abhängigkeit der Variablen. (Tabelle ursprünglich aus Wikipedia unter Creative Commons Lizenz)</p>
</div>
<div id="lernziele-3" class="section level2">
<h2><span class="header-section-number">4.1</span> Lernziele</h2>
<ul>
<li>Daten auf Normalverteilung prüfen (Shapiro-Test)</li>
<li>Einfache statistische Tests rechnen (T-Test, Wilcoxon-Test)</li>
<li>Effektstärke berechnen und eigene Funktionen schreiben</li>
<li>ANOVA durchführen</li>
</ul>
</div>
<div id="normalverteilung-prüfen" class="section level2">
<h2><span class="header-section-number">4.2</span> Normalverteilung prüfen</h2>
<p>Wie aus obiger Tabelle ersichtlich ist, kann es mitunter zur Auswahl des korrekten statistischen Tests wichtig sein zunächst zu prüfen, ob die Werte einer Variablen normalverteilt sind. Natürlich können wir versuchen visuell abzuschätzen, ob dies der Fall ist. Für ein fiktives Beispiel wären wir zudem interessiert, die Normalverteilung für einen Wert innerhalb verschiedener Gruppen zu untersuchen. Eine schnelle deskriptive Statistik bzw. Visualisierung könnte wie folgt aussehen.</p>
<p>Wir nutzen hier die <code>skew()</code>-Funktion aus dem <code>psych</code> Paket, um die <a href="https://de.wikipedia.org/wiki/Schiefe_(Statistik)">Schiefe</a> der Verteilung zu erhalten (bei einer Normalverteilung nahe 0, bei positiven Werten ist der Ausläufer nach rechts länger, bei negativen Werten der Ausläufer nach links).</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb114-1"></a><span class="kw">library</span>(psych)</span>
<span id="cb114-2"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb114-2"></a></span>
<span id="cb114-3"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb114-3"></a>daten <span class="op">%&gt;%</span></span>
<span id="cb114-4"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb114-4"></a><span class="st">  </span><span class="kw">group_by</span>(untersuchung) <span class="op">%&gt;%</span></span>
<span id="cb114-5"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb114-5"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">schiefe_dlp =</span> <span class="kw">skew</span>(dlp))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   untersuchung  schiefe_dlp
##   &lt;chr&gt;               &lt;dbl&gt;
## 1 Abdomen            2.10  
## 2 Becken             3.39  
## 3 Gesicht            2.57  
## 4 Kopf               0.223 
## 5 Thorax             3.58  
## 6 Traumaspirale      0.0290</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb116-1"></a>daten <span class="op">%&gt;%</span></span>
<span id="cb116-2"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb116-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> dlp, <span class="dt">fill =</span> untersuchung)) <span class="op">+</span></span>
<span id="cb116-3"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb116-3"></a><span class="st">    </span><span class="kw">geom_density</span>() <span class="op">+</span></span>
<span id="cb116-4"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb116-4"></a><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(untersuchung)) <span class="op">+</span></span>
<span id="cb116-5"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb116-5"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;DLP [mGy*cm]&quot;</span>,</span>
<span id="cb116-6"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb116-6"></a>         <span class="dt">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb116-7"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb116-7"></a>         <span class="dt">fill =</span> <span class="st">&quot;Untersuchungsbezeichnung&quot;</span>) <span class="op">+</span></span>
<span id="cb116-8"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb116-8"></a><span class="st">    </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="go_for_it_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
<p>Wir sehen hier bereits, dass die DLP-Werte für Untersuchungen des Kopfes und bei Traumaspiralen vermutlich normalverteilt sind. Doch um wirklich sicher zu gehen, sollte ein entsprechender statistischer Test verwendet werden. Für diese Frage bietet sich der <a href="https://de.wikipedia.org/wiki/Shapiro-Wilk-Test">Shapiro-Wilk-Test</a> an.</p>
<p>Der Shapiro-Wilk-Test nimmt als sog. Nullhypothese an, dass die Daten normalverteilt sind. Ein kleiner p-Wert zeigt in diesem Fall dann entsprechen an, dass die Alternativhypothese anzunehmen ist, also dass die Daten nicht normalverteilt sind. Erfreulicherweise findet sich für die meisten statistischen Tests in R eine entsprechend benannte Funktion. Um also bspw. die DLP-Werte im gesamten Datensatz auf Normalverteilung zu untersuchen, können wir einfach die Funktion <code>shapiro.test()</code> nutzen.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb117-1"></a><span class="kw">shapiro.test</span>(daten<span class="op">$</span>dlp)</span></code></pre></div>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  daten$dlp
## W = 0.8234, p-value &lt; 2.2e-16</code></pre>
<p>In diesem Fall zeigt also der p-Wert &lt; 2,2 x 10<sup>-16</sup> an, dass die Alternativhypothese angenommen werden sollte - die DLP-Werte im Gesamtdatensatz also nicht normalverteilt sind.</p>
<div id="ein-kurzer-ausflug-in-ergebnisobjekte" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Ein kurzer Ausflug in Ergebnisobjekte</h3>
<p>In vielen Fällen sind die Ausgaben solcher statistischen Tests etwas unintuitiv formatiert und die einzelnen Werte weiterzuverwenden erscheint zunächst schwierig. Es lohnt daher an dieser Stelle ein kurzer Ausflug, denn wir können durchaus auf Einzelteile der Ausgabe direkt zugreifen. Um einen etwas tieferen Einblick zu erhalten, speichern wir zunächst das Ergebnis der <code>shapiro.test()</code> Funktion in einer Variablen und schauen uns die Struktur der Variablen an.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb119-1"></a>shapiro.ergebnis &lt;-<span class="st"> </span><span class="kw">shapiro.test</span>(daten<span class="op">$</span>dlp)</span>
<span id="cb119-2"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb119-2"></a><span class="kw">str</span>(shapiro.ergebnis)</span></code></pre></div>
<pre><code>## List of 4
##  $ statistic: Named num 0.823
##   ..- attr(*, &quot;names&quot;)= chr &quot;W&quot;
##  $ p.value  : num 8.48e-46
##  $ method   : chr &quot;Shapiro-Wilk normality test&quot;
##  $ data.name: chr &quot;daten$dlp&quot;
##  - attr(*, &quot;class&quot;)= chr &quot;htest&quot;</code></pre>
<p>Wie man erkennen kann, handelt es sich um eine Liste von Werten, die einfach—wenn sie nicht in einer Variablen gespeichert sind—gemeinsam auf der Konsole ausgegeben werden. Das Dollarzeichen <code>$</code> in der Ausgabe der <code>str()</code> Funktion zeigt hier aber bereits an, dass wir auch einzelne Teile des Ergebnisses direkt referenzieren können, ähnlich den Spalten eines Dataframes.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb121-1"></a>shapiro.ergebnis<span class="op">$</span>p.value</span></code></pre></div>
<pre><code>## [1] 8.48211e-46</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb123-1"></a>shapiro.ergebnis<span class="op">$</span>p.value <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.05</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Wären wir also bspw. in obigem fiktiven Beispiel daran interessiert die Normalverteilung innerhalb der Subgruppen zu prüfen, könnten wir in Tidyverse-Syntax eine Verkettung von Befehlen schreiben, an deren Ende eine ansprechend formatierte Tabelle stünde, die in einer Spalte auch gleich prüft, ob der p-Wert unterhalb des Signifikanzniveau von 0.05 liegt.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb125-1"></a>daten <span class="op">%&gt;%</span></span>
<span id="cb125-2"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb125-2"></a><span class="st">  </span><span class="kw">group_by</span>(untersuchung) <span class="op">%&gt;%</span></span>
<span id="cb125-3"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb125-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">shapiro_p.wert =</span> <span class="kw">shapiro.test</span>(dlp)<span class="op">$</span>p.value) <span class="op">%&gt;%</span></span>
<span id="cb125-4"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb125-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">signifikant_0.05 =</span> shapiro_p.wert <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.05</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   untersuchung  shapiro_p.wert signifikant_0.05
##   &lt;chr&gt;                  &lt;dbl&gt; &lt;lgl&gt;           
## 1 Abdomen             1.48e-30 TRUE            
## 2 Becken              4.46e-10 TRUE            
## 3 Gesicht             1.01e-12 TRUE            
## 4 Kopf                3.06e-20 TRUE            
## 5 Thorax              4.29e-41 TRUE            
## 6 Traumaspirale       5.19e- 5 TRUE</code></pre>
<p>Wir sehen also, dass—entgegen der ursprünglichen Annahme—auch in den Gruppen, die rein visuell und deskriptiv normalverteilt erschienen (Kopf und Traumaspirale), in Wirklichkeit keine Normalverteilung vorliegt.</p>
</div>
</div>
<div id="t-test-und-wilcoxon-test" class="section level2">
<h2><span class="header-section-number">4.3</span> T-Test und Wilcoxon-Test</h2>
<p>Nachdem nun die Daten auf Normalverteilung geprüft wurden, können wir mit dem entsprechenden statistischen Test untersuchen, ob zwischen einzelnen Gruppen ein signifikanter Unterschied in der Verteilung der Werte für eine Variable existiert. In unserem Falle wäre, da die Daten nicht normalverteilt sind, der <a href="https://de.wikipedia.org/wiki/Wilcoxon-Mann-Whitney-Test">Wilcoxon-Mann-Whitney-Test</a> die richtige Wahl. Ähnlich wie für den Shapiro-Wilk-Test <code>shapiro.test()</code> existiert in diesem Falle die Funktion <code>wilcoxon.test()</code>. Die Funktion erwartet als Parameter entweder zwei Vektoren mit Zahlenwerten (oder ein Dataframe und eine sogenannte Formel, aber dazu später). Für ein einfaches Beispiel wollen wir den Vergleich der DLP-Werte von Thorax-Untersuchungen mit denen von Abdomen-Untersuchungen untersuchen. Hierzu ziehen wir uns zunächst die entsprechenden Werte aus dem Dataframe heraus und speichern sie in separaten Variablen, anschließend können diese Vektoren der Funktion <code>wilcoxon.test()</code> übergeben werden. Im Übrigen geht R bei T-Test und Wilcoxon-Test davon aus, dass es sich um unverbundene Stichproben handelt. Sicherheitshalber sollte man sich aber angewöhnen, dies auch explizit mithilfe des Parameters <code>paired = FALSE</code> anzugeben.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb127-1"></a><span class="co"># erst die Funktion pull() extrahiert aus dem Dataframe einen einfachen Vektor</span></span>
<span id="cb127-2"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb127-2"></a>dlp.abdomen &lt;-<span class="st"> </span>daten <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(untersuchung <span class="op">==</span><span class="st"> &quot;Abdomen&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(dlp)</span>
<span id="cb127-3"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb127-3"></a>dlp.thorax  &lt;-<span class="st"> </span>daten <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(untersuchung <span class="op">==</span><span class="st"> &quot;Thorax&quot;</span>)  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(dlp)</span>
<span id="cb127-4"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb127-4"></a></span>
<span id="cb127-5"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb127-5"></a><span class="kw">wilcox.test</span>(dlp.abdomen, dlp.thorax, <span class="dt">paired =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## 
##  Wilcoxon rank sum test with continuity correction
## 
## data:  dlp.abdomen and dlp.thorax
## W = 445818, p-value &lt; 2.2e-16
## alternative hypothesis: true location shift is not equal to 0</code></pre>
<p>Wie erwartet, zeigt hier der p-Wert &lt; 2,2 x 10<sup>-16</sup> an, dass die DLP-Werte von Thorax-Untersuchungen und Abdomen-Untersuchungen signifikant verschieden sind.</p>
<p>Genau so einfach ließe sich entsprechend auch ein T-Test <code>t.test()</code> rechnen, der zwar in diesem Falle vielleicht nicht optimal wäre, weil wie bereits besprochen keine Normalverteilung der Werte vorliegt, aber das ignorieren wir einmal.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb129-1"></a><span class="kw">t.test</span>(dlp.abdomen, dlp.thorax, <span class="dt">paired =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  dlp.abdomen and dlp.thorax
## t = 14.719, df = 1032.2, p-value &lt; 2.2e-16
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  554.7071 725.3559
## sample estimates:
## mean of x mean of y 
## 1037.5276  397.4961</code></pre>
<div id="ein-kurzer-ausflug-in-formeln" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Ein kurzer Ausflug in Formeln</h3>
<p>Mit Formeln werden in R nicht übliche Formeln in der Art <code>f(x) = mx + b</code> bezeichnet, sondern bei der Definition von statistischen Tests oder Modellen ein Ausdruck, der beschreibt welche Zielvariable von welchen Einflussvariablen abhängen soll. Eine Formel in R besteht immer aus einer Tilde <code>~</code> und einem oder mehreren Ausdrücken, die jeweils rechts (RHS = right hand side) bzw. links (LHS = left hand side) der Tilde <code>~</code> stehen. Die Zielvariable steht dabei links (LHS) und die möglichen Einflussvariablen rechts (RHS).</p>
<p>Wollten wir also beispielsweise ausdrücken, dass wir das DLP in Abhängigkeit der Untersuchungsbeschreibung auf statistische Signifikanz untersuchen wollen würden, könnten wir das folgendermaßen ausdrücken: <code>dlp ~ untersuchung</code>. Wollten wir also in unserem Beispiel die beiden Gruppen Thorax und Abdomen vergleichen, könnten wir den Ausdruck <code>daten %&gt;% filter(untersuchung %in% c("Abdomen", "Thorax"))</code> nutzen, um ein Dataframe zu erzeugen, das nur diese beiden Gruppen enthält. Bei dem Aufruf der Funktion <code>t.test()</code> müssten wir dieses Dataframe als Parameter <code>data =</code> übergeben und als ersten Parameter die oben genannte Formel <code>dlp ~ untersuchung</code>.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb131-1"></a><span class="co"># auch hier hilft eine Schreibweise mit Zeilenumbrüchen nicht den Überblick zu verlieren</span></span>
<span id="cb131-2"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb131-2"></a><span class="kw">t.test</span>(</span>
<span id="cb131-3"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb131-3"></a>  dlp <span class="op">~</span><span class="st"> </span>untersuchung,</span>
<span id="cb131-4"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb131-4"></a>  <span class="dt">data =</span> daten <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(untersuchung <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Abdomen&quot;</span>, <span class="st">&quot;Thorax&quot;</span>)),</span>
<span id="cb131-5"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb131-5"></a>  <span class="dt">paired =</span> <span class="ot">FALSE</span></span>
<span id="cb131-6"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb131-6"></a>  )</span></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  dlp by untersuchung
## t = 14.719, df = 1032.2, p-value &lt; 2.2e-16
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  554.7071 725.3559
## sample estimates:
## mean in group Abdomen  mean in group Thorax 
##             1037.5276              397.4961</code></pre>
<p>Das mag zunächst etwas kompliziert wirken. Aber solche Schreibweisen haben den Vorteil, dass nicht für jeden Test neue Variablen definiert werden müssen, was bei langen und komplizierten Auswertungen schonmal dazu führen kann, dass man den Überblick verliert. Für einfache statistische Tests ist die Formelschreibweise nicht unbedingt nötig, und beide Herangehensweisen liefern identische Ergebnisse. Im späteren Kapitel zu Machine Learning werden wir allerdings um die Verwendung dieser Formelschreibweise nicht herum kommen.</p>
</div>
<div id="ein-kurzer-ausflug-in-funktionen" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Ein kurzer Ausflug in Funktionen</h3>
<p>Im Live-Webinar hatten wir darüber gesprochen, dass bspw. beim T-Test neben dem p-Wert auch die sog. <a href="https://de.wikipedia.org/wiki/Effektstärke">Effektstärke</a> relevant sein kann. Zwar existiert für R beispielsweise das Paket <a href="https://cran.r-project.org/web/packages/effsize/index.html"><code>effsize</code></a>, das Funktionen enthält um die Effektstärke zu berechnen, aber gelegentlich kommt vielleicht man an einen Punkt, wo auf die Schnelle kein Paket zu finden ist, dass genau die Funktion enthält, die man sucht. Für solche Fälle bietet R die Möglichkeit, eigene Funktionen zu definieren, die der Vollständigkeit hier genannt werden soll, obwohl diese spezielle Funktionalität für den Anfang vielleicht etwas komplex ist.</p>
<p>Für ein kurzes Beispiel wollen wir einen Spezialfall betrachten, in dem für unverbundene Stichproben gleicher Gruppengröße die Effektstärke anhand von T-Statistik und df-Wert des T-Testes brechnet werden kann. Wir wollen dabei das Ergebnisobjekt der Funktion <code>t.test()</code> nehmen und direkt die Werte für T-Statistik und df extrahiert und sodann die Effektstärke berechnet werden kann.</p>
<p>Eine Funktion kann einfach mithilfe der Funktion <code>function()</code> definiert werden, und in einer Variable gespeichert werden, die genutzt werden kann, um die Funktion aufzurufen. Innerhalb der runden Klammern <code>()</code> von <code>function()</code> können Parameter definiert werden, die dann innerhalb der Funktion verfügbar sind. Beim Aufruf kann auch an selbst definierte Formeln mithilfe des Verkettungsoperators <code>%&gt;%</code> ein Parameter übergeben werden. Die Möglichkeiten, die sich hierdurch ergeben sind schier endlos…</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-1"></a>meine_cohens_d_funktion &lt;-<span class="st"> </span><span class="cf">function</span>(ergebnis_t.test) {</span>
<span id="cb133-2"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-2"></a>  <span class="co"># Die Funktion unname() ist hier für eine schönere Ausgabe am Ende</span></span>
<span id="cb133-3"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-3"></a>  <span class="co"># der Funktion nötig. Kann aber auch ignoriert werden.</span></span>
<span id="cb133-4"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-4"></a>  t_statistik &lt;-<span class="st"> </span>ergebnis_t.test<span class="op">$</span>statistic <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unname</span>()</span>
<span id="cb133-5"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-5"></a>  df_wert     &lt;-<span class="st"> </span>ergebnis_t.test<span class="op">$</span>parameter <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unname</span>()</span>
<span id="cb133-6"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-6"></a></span>
<span id="cb133-7"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-7"></a>  <span class="co"># Formel für Cohens d</span></span>
<span id="cb133-8"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-8"></a>  <span class="dv">2</span> <span class="op">*</span><span class="st"> </span>t_statistik <span class="op">/</span><span class="st"> </span><span class="kw">sqrt</span>(df_wert)</span>
<span id="cb133-9"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-9"></a>}</span>
<span id="cb133-10"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-10"></a></span>
<span id="cb133-11"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-11"></a><span class="kw">t.test</span>(</span>
<span id="cb133-12"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-12"></a>  dlp <span class="op">~</span><span class="st"> </span>untersuchung,</span>
<span id="cb133-13"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-13"></a>  <span class="dt">data =</span> daten <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(untersuchung <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Abdomen&quot;</span>, <span class="st">&quot;Thorax&quot;</span>)),</span>
<span id="cb133-14"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-14"></a>  <span class="dt">paired =</span> <span class="ot">FALSE</span></span>
<span id="cb133-15"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#cb133-15"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">meine_cohens_d_funktion</span>()</span></code></pre></div>
<pre><code>## [1] 0.9162841</code></pre>

</div>
</div>
</div>
<div id="disqus_thread"></div>
<script>
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://go-for-it.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the
<a href="https://disqus.com/?ref_noscript">
  comments powered by Disqus.</a></noscript>
            </section>

          </div>
        </div>
      </div>
<a href="deskriptive-statistik-in-r.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
