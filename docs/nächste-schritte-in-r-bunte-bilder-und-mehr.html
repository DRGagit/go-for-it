<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Nächste Schritte in R: bunte Bilder und mehr | DRG/AGIT - Go for IT</title>
  <meta name="description" content="Dies ist das Begleitbuch für die Webinarreihe ‘Go for IT’." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Nächste Schritte in R: bunte Bilder und mehr | DRG/AGIT - Go for IT" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="./assets/img/banner.png" />
  <meta property="og:description" content="Dies ist das Begleitbuch für die Webinarreihe ‘Go for IT’." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Nächste Schritte in R: bunte Bilder und mehr | DRG/AGIT - Go for IT" />
  
  <meta name="twitter:description" content="Dies ist das Begleitbuch für die Webinarreihe ‘Go for IT’." />
  <meta name="twitter:image" content="./assets/img/banner.png" />

<meta name="author" content="Bettina Baeßler &amp; Daniel Pinto dos Santos" />


<meta name="date" content="2020-03-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="einstieg-in-r-erste-schritte.html"/>
<link rel="next" href="deskriptive-statistik-in-r.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119151357-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-119151357-2');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DRG/AGIT - Go for IT</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Einleitung</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#termine-der-live-webinare-20192020"><i class="fa fa-check"></i>Termine der Live-Webinare 2019/2020</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#zum-nachschauen"><i class="fa fa-check"></i>Zum Nachschauen</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html"><i class="fa fa-check"></i><b>1</b> Einstieg in R: erste Schritte</a>
<ul>
<li class="chapter" data-level="1.1" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#lernziele"><i class="fa fa-check"></i><b>1.1</b> Lernziele</a></li>
<li class="chapter" data-level="1.2" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#installation-von-r-und-rstudio"><i class="fa fa-check"></i><b>1.2</b> Installation von R und RStudio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#installation-r"><i class="fa fa-check"></i><b>1.2.1</b> Installation R</a></li>
<li class="chapter" data-level="1.2.2" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#installation-rstudio"><i class="fa fa-check"></i><b>1.2.2</b> Installation RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#die-rstudio-oberfläche"><i class="fa fa-check"></i><b>1.3</b> Die RStudio Oberfläche</a></li>
<li class="chapter" data-level="1.4" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#arithmetische-operatoren"><i class="fa fa-check"></i><b>1.4</b> Arithmetische Operatoren</a></li>
<li class="chapter" data-level="1.5" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#logische-operatoren"><i class="fa fa-check"></i><b>1.5</b> Logische Operatoren</a></li>
<li class="chapter" data-level="1.6" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#besondere-operatoren"><i class="fa fa-check"></i><b>1.6</b> Besondere Operatoren</a></li>
<li class="chapter" data-level="1.7" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#variablen"><i class="fa fa-check"></i><b>1.7</b> Variablen</a></li>
<li class="chapter" data-level="1.8" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#funktionen"><i class="fa fa-check"></i><b>1.8</b> Funktionen</a></li>
<li class="chapter" data-level="1.9" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#vektoren"><i class="fa fa-check"></i><b>1.9</b> Vektoren</a></li>
<li class="chapter" data-level="1.10" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#dataframes"><i class="fa fa-check"></i><b>1.10</b> Dataframes</a></li>
<li class="chapter" data-level="1.11" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#daten-einlesen"><i class="fa fa-check"></i><b>1.11</b> Daten einlesen</a></li>
<li class="chapter" data-level="1.12" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#ausblick"><i class="fa fa-check"></i><b>1.12</b> Ausblick</a></li>
<li class="chapter" data-level="1.13" data-path="einstieg-in-r-erste-schritte.html"><a href="einstieg-in-r-erste-schritte.html#schlussbemerkungen"><i class="fa fa-check"></i><b>1.13</b> Schlussbemerkungen</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><i class="fa fa-check"></i><b>2</b> Nächste Schritte in R: bunte Bilder und mehr</a>
<ul>
<li class="chapter" data-level="2.1" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#lernziele-1"><i class="fa fa-check"></i><b>2.1</b> Lernziele</a></li>
<li class="chapter" data-level="2.2" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#grafiken-in-base-r"><i class="fa fa-check"></i><b>2.2</b> Grafiken in Base R</a></li>
<li class="chapter" data-level="2.3" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#pakete-installieren-und-laden"><i class="fa fa-check"></i><b>2.3</b> Pakete installieren und laden</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#ein-kurzer-ausflug-ins-tidyverse"><i class="fa fa-check"></i><b>2.3.1</b> Ein kurzer Ausflug ins Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="nächste-schritte-in-r-bunte-bilder-und-mehr.html"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#grafiken-mit-ggplot2"><i class="fa fa-check"></i><b>2.4</b> Grafiken mit ggplot2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html"><i class="fa fa-check"></i><b>3</b> Deskriptive Statistik in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#lernziele-2"><i class="fa fa-check"></i><b>3.1</b> Lernziele</a></li>
<li class="chapter" data-level="3.2" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#deskriptive-statistiken-mit-basis-r"><i class="fa fa-check"></i><b>3.2</b> Deskriptive Statistiken mit Basis R</a></li>
<li class="chapter" data-level="3.3" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#deskriptive-statistiken-im-tidyverse"><i class="fa fa-check"></i><b>3.3</b> Deskriptive Statistiken im Tidyverse</a></li>
<li class="chapter" data-level="3.4" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#deskriptive-statistiken-mit-anderen-paketen"><i class="fa fa-check"></i><b>3.4</b> Deskriptive Statistiken mit anderen Paketen</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#psych"><i class="fa fa-check"></i><b>3.4.1</b> Psych</a></li>
<li class="chapter" data-level="3.4.2" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#summarytools"><i class="fa fa-check"></i><b>3.4.2</b> Summarytools</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="deskriptive-statistik-in-r.html"><a href="deskriptive-statistik-in-r.html#mehr-bunte-bilder"><i class="fa fa-check"></i><b>3.5</b> Mehr bunte Bilder</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html"><i class="fa fa-check"></i><b>4</b> Theoretisch ja, praktisch auch! Tests in R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#lernziele-3"><i class="fa fa-check"></i><b>4.1</b> Lernziele</a></li>
<li class="chapter" data-level="4.2" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#normalverteilung-prüfen"><i class="fa fa-check"></i><b>4.2</b> Normalverteilung prüfen</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#ein-kurzer-ausflug-in-ergebnisobjekte"><i class="fa fa-check"></i><b>4.2.1</b> Ein kurzer Ausflug in Ergebnisobjekte</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#t-test-und-wilcoxon-test"><i class="fa fa-check"></i><b>4.3</b> T-Test und Wilcoxon-Test</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#ein-kurzer-ausflug-in-formeln"><i class="fa fa-check"></i><b>4.3.1</b> Ein kurzer Ausflug in Formeln</a></li>
<li class="chapter" data-level="4.3.2" data-path="theoretisch-ja-praktisch-auch-tests-in-r.html"><a href="theoretisch-ja-praktisch-auch-tests-in-r.html#ein-kurzer-ausflug-in-funktionen"><i class="fa fa-check"></i><b>4.3.2</b> Ein kurzer Ausflug in Funktionen</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DRG/AGIT - Go for IT</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="nächste-schritte-in-r-bunte-bilder-und-mehr" class="section level1">
<h1><span class="header-section-number">2</span> Nächste Schritte in R: bunte Bilder und mehr</h1>
<p>Das Sprichwort <a href="https://de.wikipedia.org/wiki/Ein_Bild_sagt_mehr_als_tausend_Worte">“Ein Bild sagt mehr als tausend Worte”</a> stimmt auch und insbesondere, wenn man sich mit Daten beschäftigt. Häufig ist es wesentlich einfacher, sich mithilfe einer guten Visualisierung einen ersten Überblick über Daten zu verschaffen, als anhand relativ abstrakter Maßzahlen, wie beispielsweise Mittelwert, Median, Quartilen, etc. Noch deutlicher wird es, wenn man beispielsweise grobe Zusammenhänge in Daten finden will. Da wir sehr gewohnt sind, mit unseren Augen Muster zu erkennen, können wir in einer Grafik beispielsweise extrem schnell Gruppen und Ausreißer identifizieren, was bei bloßer Betrachung einer Tabelle schier unmöglich wäre.</p>
<div class="figure">
<img src="assets/img/dosis_traumaspirale.png" alt="" />
<p class="caption">Beipsiel einer einfachen Punktwolke: Leicht erkennt man eine Gruppe von Untersuchungen mit identischem CTDI und dass 80kV-Untersuchungen zu den DLP-Ausreißern gehören.</p>
</div>
<p>In vielen Anwendungsfällen stellt daher die <a href="https://de.wikipedia.org/wiki/Informationsvisualisierung">Datenvisualisierung</a> einen ersten wichtigen Schritt dar.</p>
<div id="lernziele-1" class="section level2">
<h2><span class="header-section-number">2.1</span> Lernziele</h2>
<p>In diesem Kapitel werden folgende Themen besprochen:</p>
<ul>
<li>Grafiken mithilfe von R-Basisfunktionen zu erstellen</li>
<li>zusätzliche Pakete installieren und laden</li>
<li>die Syntax von ggplot2 verstehen und Grafiken damit erstellen
<ul>
<li>Punktwolke</li>
<li>Balkendiagramm</li>
<li>Histogramm / Verteilungsdichte</li>
<li>Boxplot</li>
</ul></li>
</ul>
</div>
<div id="grafiken-in-base-r" class="section level2">
<h2><span class="header-section-number">2.2</span> Grafiken in Base R</h2>
<p>Die Grafikfunktionen in Basis-R sind verhältnismäßig schnell erlernbar und einfach, allerdings bieten sie nur einen recht beschränkten Funktionsumfang. Trotzdem lohnt es sich, sich auch mit diesen zu beschäftigen, denn für einfache schnelle Auswertungen eignen sie sich ganz gut.</p>
<p>Nachdem wir im vorigen Kapitel gesehen haben, wie man einzelne Spalten eines Dataframes gezielt anspricht, können wir aus unserer Datei <code>ct_data.csv</code> <a href="./assets/data/ct_data.csv">(~Download~)</a> beispielsweise eine einfache Grafik erstellen, die DLP gegen CTDI aufträgt.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb67-1"></a><span class="kw">plot</span>(daten<span class="op">$</span>ctdi.vol, daten<span class="op">$</span>dlp)</span></code></pre></div>
<p><img src="go_for_it_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>Die Funktion <code>plot()</code> erwartet als Parameter zwei Vektoren gleicher Länge, die die x- und y-Werte repräsentieren. Es ist also nicht zwingend nötig, die Grafik aus einem Dataframe zu erzeugen.</p>
<p>Ähnlich einfach können Boxplots und Balkendiagramme erstellt werden.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb68-1"></a><span class="kw">hist</span>(daten<span class="op">$</span>dlp)</span></code></pre></div>
<p><img src="go_for_it_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb69-1"></a><span class="kw">boxplot</span>(daten<span class="op">$</span>dlp <span class="op">~</span><span class="st"> </span>daten<span class="op">$</span>untersuchung)</span></code></pre></div>
<p><img src="go_for_it_files/figure-html/unnamed-chunk-19-2.png" width="672" /></p>
<p>Zwar können auch mit Basis-R erstellte Grafiken optisch ansprechender gestaltet werden, doch ist die Syntax der Befehle an vielen Stellen etwas unintuitiv, weshalb an dieser Stelle nicht weiter darauf eingegangen werden soll.</p>
</div>
<div id="pakete-installieren-und-laden" class="section level2">
<h2><span class="header-section-number">2.3</span> Pakete installieren und laden</h2>
<p>Glücklicherweise hat man in R die Möglichkeit zusätzliche Pakete zu installieren, die den Funktionsumfang erheblich erweitern. Ein solches Paket (oder besser gesagt gleich eine ganze Sammlung solcher Pakete) ist das <a href="https://www.tidyverse.org">Tidyverse</a>. Über die Vor- und Nachteile der Benutzung von Funktionen aus dem Tidyverse wird im Internet in regelmäßigen Abständen hitzig debatiert (z.B. <a href="https://blog.ephorie.de/why-i-dont-use-the-tidyverse">contra</a> und <a href="http://varianceexplained.org/r/teach-tidyverse/">pro</a>). In meiner persönlichen Arbeitsweise ist das Tidyverse eine unverzichtbare Säule und fast immer das Laden desselben die erste Zeile Code. Neben Funktionen zur Datenaufbereitung und -bearbeitung enthält das Tidyverse das äußerst umfangreiche <a href="https://ggplot2.tidyverse.org"><code>ggplot2</code></a>-Paket, das bei der Erstellung von Grafiken hilft.</p>
<p>Doch von vorne. Zur Installation des tidyverse kann man entweder die graphische Oberfläche von RStudio nutzen und dieses über <code>Tools -&gt; Install Packages...</code> installieren oder den entsprechenden Button im Packages-Pane nutzen. Alternativ kann man auch über die Konsole das Paket installieren.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb70-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<div id="ein-kurzer-ausflug-ins-tidyverse" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Ein kurzer Ausflug ins Tidyverse</h3>
<p>Bevor wir zu den “bunten Bildern” kommen, vielleicht noch ein kurzer Ausflug ins Tidyverse, um einige Feinheiten dieses Paketes zu erläutern. Alle dazugehörigen Pakete folgen der Philosphie der <a href="https://en.wikipedia.org/wiki/Tidy_data">“tidy data”</a>. Idealerweise sollte man sich diese Philosophie im Umgang mit Daten angewöhnen, da es erheblich zur Klarheit der Daten beiträgt und natürlich auch entsprechend die weiteren Auswertungen in R erleichtert. Um alle Pakete des Tidyverse zu laden, reicht ein einfacher Befehl.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb71-1"></a><span class="co"># die Meldungen, die hierbei auf der Konsole ausgegeben werden,</span></span>
<span id="cb71-2"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb71-2"></a><span class="co"># können erstmal ignoriert werden</span></span>
<span id="cb71-3"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb71-3"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<p>Darüberhinaus enthält das Tidyverse verschiedene Funktionen, die Funktionen aus Basis-R sehr ähnlich sind, aber einige smarte Vorteile bergen. So existiert bspw. zum Einlesen von Daten die Funktion <code>read_csv2()</code>, die nicht nur im Namen nahezu identisch ist mit der bereits bekannten Funktion <code>read.csv2()</code>. Allerdings hat die tidyverse-Funktion <code>read_csv2()</code> den angenehmen Vorteil, dass sie u.a. versucht zu erkennen, ob in einer Spalte nur Daten eines Typus sind (z.B.: Text, Zahlen oder Datumsangaben) und dann direkt ein Dataframe mit korrekter Formatierung anlegt.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb72-1"></a><span class="co"># die read_csv2() Funktion gibt Meldungen aus, die erinnern sollen mit welchen</span></span>
<span id="cb72-2"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb72-2"></a><span class="co"># Einstellungen die Daten eingelesen wurden und welche Datentypen erkannt wurden.</span></span>
<span id="cb72-3"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb72-3"></a>daten &lt;-<span class="st"> </span><span class="kw">read_csv2</span>(<span class="st">&quot;ct_data.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Using &#39;,&#39; as decimal and &#39;.&#39; as grouping mark. Use read_delim() for more control.</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   tag = col_date(format = &quot;&quot;),
##   untersuchung = col_character(),
##   kv = col_double(),
##   mas = col_double(),
##   ctdi.vol = col_double(),
##   dlp = col_double()
## )</code></pre>
<p>(Es mag an dieser Stelle viellicht noch nicht ganz klar sein, was damit gemeint ist. Die Vorteile werden aber im Verlauf vielleicht offensichtlich. Ich würde daher empfehlen, immer die Tidyverse-Entsprechungen von Base-R Funktionen zu nutzen).</p>
<p>Eine weitere essentielle Funktion Erweiterung, die das Tidyverse mit sich bringt, ist der Übergabeoperator <code>%&gt;%</code>. Dieser erlaubt es, mehrere Befehle in für Menschen leichter lesbarer Weise miteinander zu verketten, anstatt dass kompliziert verschachtelte Funktionen benutzt werden müssen. Vereinfacht kann gesagt werden, dass jeweils das Ergebnis einer Funktion als erster Parameter an die folgende Funktion weitergereicht wird.</p>
<p>Am einfachsten lässe es sich an einem banalen Beispiel verdeutlichen: aus einer Reihe Zahlen soll zunächst der Mittelwert gebildet werden, dieser soll anschließend auf drei Stellen nach dem Komma gerundet werden.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb75-1"></a><span class="co"># in Basis-R ergäbe sich dieser verschachtelte Befehl</span></span>
<span id="cb75-2"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb75-2"></a><span class="co"># es ist nicht leicht zu erkennen, dass die Funktion mean() hier</span></span>
<span id="cb75-3"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb75-3"></a><span class="co"># der erste Parameter für die Funktion round() ist, die 3 am Ende</span></span>
<span id="cb75-4"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb75-4"></a><span class="co"># der zweite</span></span>
<span id="cb75-5"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb75-5"></a><span class="kw">round</span>(<span class="kw">mean</span>(<span class="kw">c</span>(<span class="fl">12.3432345</span>, <span class="fl">5.834242453</span>, <span class="fl">9.73389543</span>)), <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 9.304</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb77-1"></a><span class="co"># gleicher Befehl in Tidyverse-Syntax</span></span>
<span id="cb77-2"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb77-2"></a><span class="co"># es kann einfach von links nach rechts eine Kette von Befehlen</span></span>
<span id="cb77-3"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb77-3"></a><span class="co"># gelesen werden</span></span>
<span id="cb77-4"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb77-4"></a><span class="kw">c</span>(<span class="fl">12.3432345</span>, <span class="fl">5.834242453</span>, <span class="fl">9.73389543</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mean</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">round</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 9.304</code></pre>
</div>
</div>
<div id="grafiken-mit-ggplot2" class="section level2">
<h2><span class="header-section-number">2.4</span> Grafiken mit ggplot2</h2>
<p>Um Grafiken mit dem Paket ggplot2, das auch Teil des Tidyverse ist, zu erstellen muss man zunächst grob die zugrundeliegende <a href="http://dx.doi.org/10.1198/jcgs.2009.07098">“Grammatik der Grafiken”</a> verstehen. Die Idee ist, dass ähnlich wie in einem Satz bspw. <a href="https://de.wikipedia.org/wiki/Subjekt-Verb-Objekt">Subjekt, Verb und Objekt</a> stehen, Grafiken in der Form Daten, Anordnung der Daten und Aussehen der Grafik beschreiben lassen.</p>
<div class="figure">
<img src="assets/img/ggplot.png" alt="" />
<p class="caption">Grammatik der Grafiken.</p>
</div>
<p>Dabei ist zu beachten, dass die Funktion <code>ggplot()</code> das Erstellen von Grafiken startet und als ersten Parameter ein Dataframe erwartet. Anschließend muss innerhalb von <code>ggplot()</code> die ästhetische Eigenschaft definiert werden, also bspw. welche Werte auf die x-Achse und welche auf die y-Achse sollen. Dann können mit <code>+</code> jeweils Objekte und Elemente der Grafik hinzugefügt werden.</p>
<p>Zwar sind dann im Einzelfall gelegentlich mehr Befehle nötig als in Basis-R, dafür stehen zahlreiche Möglichkeiten zur Verfügung nahezu jedes Element der Grafik bis ins Detail an die eigenen Wünsche anzupassen. Wir nehemen als erstes Beispiel die Punktwolke von oben.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb79-1"></a><span class="kw">ggplot</span>(daten, <span class="kw">aes</span>(<span class="dt">x =</span> ctdi.vol, <span class="dt">y =</span> dlp)) <span class="op">+</span></span>
<span id="cb79-2"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb79-2"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="go_for_it_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>In ähnlicher Weise können auch das Histogramm und der Boxplot reproduziert werden. Außerdem kann natürlich auch das Dataframe als erster Parameter mithilfe des Verkettungsoperators <code>%&gt;%</code> weitergegeben werden.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb80-1"></a><span class="co"># für das Histogramm wird keine Angabe zur y-Achse benötigt,</span></span>
<span id="cb80-2"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb80-2"></a><span class="co"># dies wird aus der Häufigkeit der Werte berechnet</span></span>
<span id="cb80-3"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb80-3"></a>daten <span class="op">%&gt;%</span></span>
<span id="cb80-4"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb80-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> dlp)) <span class="op">+</span></span>
<span id="cb80-5"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb80-5"></a><span class="st">    </span><span class="kw">geom_histogram</span>()</span></code></pre></div>
<p><img src="go_for_it_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb81-1"></a>daten <span class="op">%&gt;%</span></span>
<span id="cb81-2"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb81-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> untersuchung, <span class="dt">y =</span> dlp)) <span class="op">+</span></span>
<span id="cb81-3"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb81-3"></a><span class="st">    </span><span class="kw">geom_boxplot</span>()</span></code></pre></div>
<p><img src="go_for_it_files/figure-html/unnamed-chunk-26-2.png" width="672" /></p>
<p>Es können nicht nur ästhetische Eigenschaften im Sinne von x- und y-Zuordnung definiert werden, sondern beispielsweise auch die Farbe eines Elements. Im folgenden Beispiel wollen wir die Punkte in der Punktwolke einmal nach Untersuchungsart einfärben.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb82-1"></a>daten <span class="op">%&gt;%</span></span>
<span id="cb82-2"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb82-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> ctdi.vol, <span class="dt">y =</span> dlp, <span class="dt">color =</span> untersuchung)) <span class="op">+</span></span>
<span id="cb82-3"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb82-3"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="go_for_it_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>Grafiken können ebenfalls in Variablen gespeichert werden und dann weiter mit <code>+</code> um zusätzliche Elemente ergänzt werden. Im folgenden Beispiel wird die Punktwolke mit den farbigen Punkten in einer Variablen gespeichert. Anschließend wird sie mit besseren Beschriftungen versehen und wiederum gespeichert, zuletzt wird ein anderes Aussehen mithilfe der <code>theme_bw()</code> Funktion auf die Grafik angewendet (neben <code>theme_bw()</code> existieren noch weitere wie <code>theme_minimal()</code>, <code>theme_dark()</code>, usw.).</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-1"></a>buntes.bild &lt;-<span class="st"> </span>daten <span class="op">%&gt;%</span></span>
<span id="cb83-2"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> ctdi.vol, <span class="dt">y =</span> dlp, <span class="dt">color =</span> untersuchung)) <span class="op">+</span></span>
<span id="cb83-3"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-3"></a><span class="st">  </span><span class="kw">geom_point</span>()</span>
<span id="cb83-4"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-4"></a></span>
<span id="cb83-5"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-5"></a>buntes.bild.beschriftet &lt;-<span class="st"> </span>buntes.bild <span class="op">+</span></span>
<span id="cb83-6"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-6"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;DLP vs. CTDI&quot;</span>,</span>
<span id="cb83-7"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-7"></a>       <span class="dt">y =</span> <span class="st">&quot;DLP [mGy*cm]&quot;</span>,</span>
<span id="cb83-8"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-8"></a>       <span class="dt">x =</span> <span class="st">&quot;CTDI [mGy]&quot;</span>,</span>
<span id="cb83-9"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-9"></a>       <span class="dt">color =</span> <span class="st">&quot;Untersuchungsbezeichnung&quot;</span>)</span>
<span id="cb83-10"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-10"></a></span>
<span id="cb83-11"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-11"></a>buntes.bild.beschriftet <span class="op">+</span></span>
<span id="cb83-12"><a href="nächste-schritte-in-r-bunte-bilder-und-mehr.html#cb83-12"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="go_for_it_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>

</div>
</div>
<div id="disqus_thread"></div>
<script>
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://go-for-it.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the
<a href="https://disqus.com/?ref_noscript">
  comments powered by Disqus.</a></noscript>
            </section>

          </div>
        </div>
      </div>
<a href="einstieg-in-r-erste-schritte.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="deskriptive-statistik-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
